<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="apc.sl.basicInfo.user.service.impl.UserMapper">

	<select id="selectUserListToCnt" resultType="int">
		SELECT COUNT(*) FROM sm_member_test
		WHERE 1=1
		<if test="searchKeyword != ''">
			AND c_name LIKE CONCAT ('%', #{searchKeyword}, '%')
		</if>
	</select>
	
	<select id="selectUserList" resultType="egovMap">
		SELECT
			m_idx,
			m_name,
			m_id,
			m_belong,
			m_rank,
			m_email,
			m_phone,
			m_lev,
			m_login_auth
		FROM sm_member_test
		WHERE 1=1
		<if test="searchKeyword != ''">
			AND m_name LIKE CONCAT ('%', #{searchKeyword}, '%')
		</if>
		ORDER BY m_idx DESC
		LIMIT #{recordCountPerPage} OFFSET #{firstIndex}
	</select>
	
	<insert id="registUser">
		INSERT INTO sm_member_test
			(
			m_id,
			m_pwd,
			m_name,
			m_belong,
			m_rank,
			m_email,
			m_phone,
			m_sign,
			m_lev,
			m_login_auth,
			m_reg_dte
			)
		VALUES
			(
			#{mId},
			#{mPwd},
			#{mName},
			#{mBelong},
			#{mRank},
			#{mEmail},
			#{mPhone},
			#{mSign},
			#{mLev},
			#{mLoginAuth},
			NOW()
			)
	</insert>
	
	<select id="selectUserInfo" resultType="egovMap">
		SELECT
			m_idx,
			m_id,
			m_pwd,
			m_name,
			m_belong,
			m_rank,
			m_email,
			m_phone,
			m_sign,
			m_lev,
			m_login_auth,
			m_reg_dte
		FROM sm_member_test
		WHERE m_idx = #{mIdx}
	</select>
	
	<update id="modifyUser">
		UPDATE sm_member_test SET
			m_id = #{mId},
			m_pwd = #{mPwd},
			m_name = #{mName},
			m_belong = #{mBelong},
			m_rank = #{mRank},
			m_email = #{mEmail},
			m_phone = #{mPhone},
			m_sign = #{mSign},
			m_lev = #{mLev},
			m_login_auth = #{mLoginAuth}
		WHERE m_idx = #{mIdx}
	</update>
	
	<delete id="deleteUser">
		DELETE FROM sm_member_test WHERE m_idx = #{mIdx}
	</delete>
</mapper>