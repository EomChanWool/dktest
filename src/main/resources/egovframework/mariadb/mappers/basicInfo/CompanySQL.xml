<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="apc.sl.basicInfo.company.service.impl.CompanyMapper">

	<select id="selectCompanyListToCnt" resultType="int">
		SELECT COUNT(*) FROM sm_company
		WHERE 1=1
		<if test="searchKeyword != ''">
			AND c_name LIKE CONCAT ('%', #{searchKeyword}, '%')
		</if>
	</select>
	
	<select id="selectCompanyList" resultType="egovMap">
		SELECT c_idx, c_name, c_addr, c_tel, c_regit_no FROM sm_company
		WHERE 1=1
		<if test="searchKeyword != ''">
			AND c_name LIKE CONCAT ('%', #{searchKeyword}, '%')
		</if>
		ORDER BY c_idx DESC
		LIMIT #{recordCountPerPage} OFFSET #{firstIndex}
	</select>
	
	<insert id="registCompany">
		INSERT INTO sm_company
			(
			c_name,
			c_addr,
			c_tel,
			c_fax,
			c_regit_no,
			c_sector,
			c_business,
			c_owner,
			c_homepage,
			c_email,
			c_cor_no,
			c_pay_bank,
			c_pay_account,
			c_acc_holder,
			c_site_info,
			c_note
			)
		VALUES
			(
			#{cName},
			#{cAddr},
			#{cTel},
			#{cFax},
			#{cRegitNo},
			#{cSector},
			#{cBusiness},
			#{cOwner},
			#{cHomepage},
			#{cEmail},
			#{cCorNo},
			#{cPayBank},
			#{cPacAccount},
			#{cAccHolder},
			#{cSiteInfo},
			#{cNote}
			)
	</insert>
	
	<select id="selectCompanyInfo" resultType="egovMap">
		SELECT
			c_idx,
			c_name,
			c_addr,
			c_tel,
			c_fax,
			c_regit_no,
			c_sector,
			c_business,
			c_owner,
			c_homepage,
			c_email,
			c_cor_no,
			c_pay_bank,
			c_pay_account,
			c_acc_holder,
			c_site_info,
			c_note
		FROM sm_company
		WHERE c_idx = #{cIdx}
	</select>
	
	<update id="modifyCompany">
		UPDATE sm_company SET
			c_name = #{cName},
			c_addr = #{cAddr},
			c_tel = #{cTel},
			c_fax = #{cFax},
			c_regit_no = #{cRegitNo},
			c_sector = #{cSector},
			c_business = #{cBusiness},
			c_owner = #{cOwner},
			c_homepage = #{cHomepage},
			c_email = #{cEmail},
			c_cor_no = #{cCorNo},
			c_pay_bank = #{cPayBank},
			c_pay_account = #{cPayAccount},
			c_acc_holder = #{cAccHolder},
			c_site_info = #{cSiteInfo},
			c_note = #{cNote}
		WHERE c_idx = #{cIdx}
	</update>
	
	<delete id="deleteCompany">
		DELETE FROM sm_company WHERE c_idx = #{cIdx}
	</delete>
</mapper>